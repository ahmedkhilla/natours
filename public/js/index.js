(()=>{var e=globalThis,t={},o={},n=e.parcelRequirec8bb;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},e.parcelRequirec8bb=n),(0,n.register)("670ud",function(t,o){!function(o,n,r,a,l,s,i,c){var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},u="function"==typeof d[a]&&d[a],p=u.i||{},f=u.cache||{},m="function"==typeof t.require&&t.require.bind(t);function h(e,t){if(!f[e]){if(!o[e]){if(l[e])return l[e];var n="function"==typeof d[a]&&d[a];if(!t&&n)return n(e,!0);if(u)return u(e,!0);if(m&&"string"==typeof e)return m(e);var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}i.resolve=function(t){var n=o[e][1][t];return null!=n?n:t},i.cache={};var s=f[e]=new h.Module(e);o[e][0].call(s.exports,i,s,s.exports,d)}return f[e].exports;function i(e){var t=i.resolve(e);return!1===t?{}:h(t)}}h.isParcelRequire=!0,h.Module=function(e){this.id=e,this.bundle=h,this.require=m,this.exports={}},h.modules=o,h.cache=f,h.parent=u,h.distDir=void 0,h.publicUrl=void 0,h.devServer=void 0,h.i=p,h.register=function(e,t){o[e]=[function(e,o){o.exports=t},{}]},Object.defineProperty(h,"root",{get:function(){return d[a]}}),d[a]=h;for(var v=0;v<n.length;v++)h(n[v]);r&&(t.exports=h(r))}({fWcLA:[function(e,t,o,n){"use strict";var r=arguments[3];t.bundle.HMR_BUNDLE_ID="23b88d06824a6668";var a="__parcel__error__overlay__",l=t.bundle.Module;t.bundle.Module=function(e){l.call(this,e),this.hot={data:t.bundle.hotData[e],_acceptCallbacks:[],_disposeCallbacks:[],accept:function(e){this._acceptCallbacks.push(e||function(){})},dispose:function(e){this._disposeCallbacks.push(e)}},t.bundle.hotData[e]=void 0},t.bundle.hotData={};var s,i,c,d,u=!1;function p(){return"undefined"!=typeof location&&0===location.protocol.indexOf("http")?location.hostname:"localhost"}function f(){return 1234}let m=globalThis.WebSocket;if(!m&&"function"==typeof t.bundle.root)try{m=t.bundle.root("ws")}catch{}var h=p(),v="undefined"==typeof location||"https:"!==location.protocol||["localhost","127.0.0.1","0.0.0.0"].includes(h)?"ws":"wss",y=t.bundle.parent;if(!y||!y.isParcelRequire){var g,w="undefined"==typeof browser?"undefined"==typeof chrome?null:chrome:browser,b=!1;try{(0,eval)('throw new Error("test"); //# sourceURL=test.js')}catch(e){b=e.stack.includes("test.js")}try{let{workerData:e,parentPort:o}=t.bundle.root("node:worker_threads");null!=e&&e.__parcel&&(o.on("message",async e=>{try{await E(e),o.postMessage("updated")}catch{o.postMessage("restart")}}),queueMicrotask(()=>o.postMessage("ready")))}catch{if(void 0!==m)try{g=new m(v+"://"+h+":1234/")}catch(e){e.message&&!e.message.includes("Disallowed operation called within global scope")&&console.error(e.message)}}g&&(g.onmessage=async function(e){var t=JSON.parse(e.data);await E(t)},g instanceof m&&(g.onerror=function(e){e.message&&console.error(e.message)},g.onclose=function(){console.warn("[parcel] \uD83D\uDEA8 Connection to the HMR server was lost")}))}async function E(e){if(s={},i={},d=[],c=[],u=!1,"reload"===e.type)D();else if("update"===e.type){"undefined"!=typeof document&&_();let o=e.assets,n=o.every(e=>"css"===e.type||"js"===e.type&&S(t.bundle.root,e.id,e.depsByBundle));if(n&&u&&o.some(e=>"d6ea1d42532a7575"!==e.envHash)&&"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&(n=!window.dispatchEvent(new CustomEvent("parcelhmrreload",{cancelable:!0}))),n){console.clear(),"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&window.dispatchEvent(new CustomEvent("parcelhmraccept")),await k(o),B();let e={};for(let o=0;o<d.length;o++){let n=d[o][1];e[n]||(function(e,o){e(o);var n=e.cache[o];if(n&&n.hot&&n.hot._acceptCallbacks.length){let e=[];if(n.hot._acceptCallbacks.forEach(function(n){let r=n(function(){return x(t.bundle.root,o)});Array.isArray(r)&&r.length&&e.push(...r)}),e.length){if(!e.every(function(e){return S(e[0],e[1])}))return D();B()}}}(d[o][0],n),e[n]=!0)}}else D()}if("error"===e.type){for(let t of e.diagnostics.ansi){let e=t.codeframe?t.codeframe:t.stack;console.error("\uD83D\uDEA8 [parcel]: "+t.message+"\n"+e+"\n\n"+t.hints.join("\n"))}if("undefined"!=typeof document){_();var o=function(e){var t=document.createElement("div");t.id=a;let o='<div style="background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;">';for(let t of e){let e=t.frames.length?t.frames.reduce((e,t)=>`${e}
<a href="${"wss"===v?"https":"http"}://${h}:1234/__parcel_launch_editor?file=${encodeURIComponent(t.location)}" style="text-decoration: underline; color: #888" onclick="fetch(this.href); return false">${t.location}</a>
${t.code}`,""):t.stack;o+=`
      <div>
        <div style="font-size: 18px; font-weight: bold; margin-top: 20px;">
          \u{1F6A8} ${t.message}
        </div>
        <pre>${e}</pre>
        <div>
          ${t.hints.map(e=>"<div>\uD83D\uDCA1 "+e+"</div>").join("")}
        </div>
        ${t.documentation?`<div>\u{1F4DD} <a style="color: violet" href="${t.documentation}" target="_blank">Learn more</a></div>`:""}
      </div>
    `}return t.innerHTML=o+="</div>",t}(e.diagnostics.html);document.body.appendChild(o)}}}function _(){var e=document.getElementById(a);e&&(e.remove(),console.log("[parcel] ✨ Error resolved"))}function D(){if("undefined"!=typeof location&&"reload"in location)location.reload();else if(void 0!==w&&w&&w.runtime&&w.runtime.reload)w.runtime.reload();else try{let{workerData:e,parentPort:o}=t.bundle.root("node:worker_threads");null!=e&&e.__parcel&&o.postMessage("restart")}catch(e){console.error("[parcel] ⚠️ An HMR update was not accepted. Please restart the process.")}}function x(e,t){var o,n,r,a=e.modules;if(!a)return[];var l=[];for(o in a)for(n in a[o][1])((r=a[o][1][n])===t||Array.isArray(r)&&r[r.length-1]===t)&&l.push([e,o]);return e.parent&&(l=l.concat(x(e.parent,t))),l}var C=null;async function k(e){let o;r.parcelHotUpdate=Object.create(null);try{if(!b){let t=e.map(e=>{var t;return null==(t=function(e){if("js"===e.type){if("undefined"!=typeof document){let t=document.createElement("script");return t.src=e.url+"?t="+Date.now(),"esmodule"===e.outputFormat&&(t.type="module"),new Promise((e,o)=>{var n;t.onload=()=>e(t),t.onerror=o,null==(n=document.head)||n.appendChild(t)})}else if("function"==typeof importScripts)if("esmodule"===e.outputFormat)return import(e.url+"?t="+Date.now());else return new Promise((t,o)=>{try{importScripts(e.url+"?t="+Date.now()),t()}catch(e){o(e)}})}}(e))?void 0:t.catch(e=>{if(w&&w.runtime&&3==w.runtime.getManifest().manifest_version&&"undefined"!=typeof ServiceWorkerGlobalScope&&r instanceof ServiceWorkerGlobalScope)return void w.runtime.reload();throw e})});o=await Promise.all(t)}e.forEach(function(e){!function e(o,n){var a=o.modules;if(a){if("css"===n.type)C||"undefined"==typeof document||(C=setTimeout(function(){for(var e=document.querySelectorAll('link[rel="stylesheet"]'),t=0;t<e.length;t++){var o=e[t].getAttribute("href"),n=p(),r="localhost"===n?RegExp("^(https?:\\/\\/(0.0.0.0|127.0.0.1)|localhost):1234").test(o):o.indexOf(n+":1234");/^https?:\/\//i.test(o)&&0!==o.indexOf(location.origin)&&!r||function(e){var t=e.getAttribute("href");if(t){var o=e.cloneNode();o.onload=function(){null!==e.parentNode&&e.parentNode.removeChild(e)},o.setAttribute("href",t.split("?")[0]+"?"+Date.now()),e.parentNode.insertBefore(o,e.nextSibling)}}(e[t])}C=null},50));else if("js"===n.type){let l=n.depsByBundle[o.HMR_BUNDLE_ID];if(l){if(a[n.id]){let e=a[n.id][1];for(let o in e)if(!l[o]||l[o]!==e[o]){let n=e[o];1===x(t.bundle.root,n).length&&function e(o,n){let r=o.modules;if(r)if(r[n]){let a=r[n][1],l=[];for(let e in a)1===x(t.bundle.root,a[e]).length&&l.push(a[e]);delete r[n],delete o.cache[n],l.forEach(o=>{e(t.bundle.root,o)})}else o.parent&&e(o.parent,n)}(t.bundle.root,n)}}b&&(0,eval)(n.output);let e=r.parcelHotUpdate[n.id];a[n.id]=[e,l]}o.parent&&e(o.parent,n)}}}(t.bundle.root,e)})}finally{delete r.parcelHotUpdate,o&&o.forEach(e=>{if(e){var t;null==(t=document.head)||t.removeChild(e)}})}}function S(e,o,n){if(s={},M(e,o,n))return!0;let r=x(t.bundle.root,o),a=!1;for(;r.length>0;){let e=r.shift(),o=M(e[0],e[1],null);if(o)a=!0;else if(null!==o){let o=x(t.bundle.root,e[1]);if(0===o.length){a=!1;break}r.push(...o)}}return a}function M(e,t,o){if(e.modules){if(o&&!o[e.HMR_BUNDLE_ID])return e.parent?M(e.parent,t,o):(u=!0,!0);if(s[t])return null;s[t]=!0;var n=e.cache[t];return!n||(c.push([e,t]),!!n&&!!n.hot&&!!n.hot._acceptCallbacks.length&&(d.push([e,t]),!0))}}function B(){for(let e=0;e<c.length;e++){let t=c[e][1];i[t]||(function(e,t){var o=e.cache[t];e.hotData[t]={},o&&o.hot&&(o.hot.data=e.hotData[t]),o&&o.hot&&o.hot._disposeCallbacks.length&&o.hot._disposeCallbacks.forEach(function(o){o(e.hotData[t])}),delete e.cache[t]}(c[e][0],t),i[t]=!0)}c=[]}},{}],f2QDv:[function(e,t,o,n){(()=>{let e=()=>{let e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},t=(t,o)=>{e();let n=`<div class="alert alert--${t}">${o}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(e,5e3)},o=async(e,o)=>{try{let n=await axios({method:"POST",url:"/api/v1/users/login",data:{email:e,password:o}});"success"===n.data.status&&(t("success","Logged in successfully!"),console.log("hey you successed"),window.setTimeout(()=>{location.assign("/")},1500))}catch(e){t("error",e.response.data.message),console.log(e)}},n=async()=>{try{(await axios({method:"GET",url:"/api/v1/users/logout"})).data.status="success",location.reload(!0)}catch(e){console.log(e.response),t("error","Error logging out! Try again.")}},r=async(e,o)=>{try{let n="password"===o?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",r=await axios({method:"PATCH",url:n,data:e});"success"===r.data.status&&t("success",`${o.toUpperCase()} updated successfully!`)}catch(e){t("error",e.response.data.message)}},a=Stripe("pk_test_51RBxaIHJH8vBPo5TYWnLN7V5N6MHo5uImMovk6fMiVtzqUGSyVZzZTxmxSu9Jf1gZYkJsxKD2LLnaoL5CqSOTJjr00dT86MN1F"),l=async e=>{try{let t=await axios(`/api/v1/bookings/checkout-session/${e}`);await a.redirectToCheckout({sessionId:t.data.session.id})}catch(e){console.log(e),showAlert("error",e)}},s=document.querySelector(".form-user-data"),i=document.querySelector(".form-user-password"),c=document.getElementById("book-tour"),d=document.getElementById("map");if(d){let{startLocation:e,locations:t}=JSON.parse(d.dataset.locations);((e,t)=>{let[o,n]=e.coordinates,r=L.map("map",{zoomControl:!1,scrollWheelZoom:!1}).setView([n,o],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(r);let a=L.latLngBounds();t.forEach(e=>{let[t,o]=e.coordinates,n=L.marker([o,t]).addTo(r);n.bindPopup(`<p>${e.day?`Day ${e.day}: `:""}${e.description}</p>`,{autoClose:!1}).openPopup(),a.extend(n.getLatLng())}),r.fitBounds(a,{padding:[100,100]})})(e,t)}document.querySelector(".form--login")&&document.querySelector(".form--login").addEventListener("submit",e=>{e.preventDefault(),o(document.getElementById("email").value,document.getElementById("password").value)}),document.querySelector(".nav__el--logout")&&document.querySelector(".nav__el--logout").addEventListener("click",n),s&&s.addEventListener("submit",e=>{e.preventDefault();let t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),r(t,"data")}),i&&i.addEventListener("submit",async e=>{e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";let t=document.getElementById("password-current").value,o=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await r({passwordCurrent:t,password:o,passwordConfirm:n},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""}),c&&c.addEventListener("click",e=>{e.target.textContent="Processing";let{tourId:t}=e.target.dataset;l(t)})})()},{}]},["fWcLA","f2QDv"],"f2QDv","parcelRequirec8bb",{})}),n("670ud")})();
//# sourceMappingURL=index.js.map
