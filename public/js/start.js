(()=>{var e=globalThis,t={},o={},r=e.parcelRequirec8bb;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},e.parcelRequirec8bb=r),(0,r.register)("7Us8l",function(t,o){!function(o,r,n,a,s,l,i,c){var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},d="function"==typeof u[a]&&u[a],p=d.i||{},f=d.cache||{},m="function"==typeof t.require&&t.require.bind(t);function h(e,t){if(!f[e]){if(!o[e]){if(s[e])return s[e];var r="function"==typeof u[a]&&u[a];if(!t&&r)return r(e,!0);if(d)return d(e,!0);if(m&&"string"==typeof e)return m(e);var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}i.resolve=function(t){var r=o[e][1][t];return null!=r?r:t},i.cache={};var l=f[e]=new h.Module(e);o[e][0].call(l.exports,i,l,l.exports,u)}return f[e].exports;function i(e){var t=i.resolve(e);return!1===t?{}:h(t)}}h.isParcelRequire=!0,h.Module=function(e){this.id=e,this.bundle=h,this.require=m,this.exports={}},h.modules=o,h.cache=f,h.parent=d,h.distDir=void 0,h.publicUrl=void 0,h.devServer=void 0,h.i=p,h.register=function(e,t){o[e]=[function(e,o){o.exports=t},{}]},Object.defineProperty(h,"root",{get:function(){return u[a]}}),u[a]=h;for(var g=0;g<r.length;g++)h(r[g]);n&&(t.exports=h(n))}({"4AIly":[function(e,t,o,r){"use strict";var n=arguments[3];t.bundle.HMR_BUNDLE_ID="43311276a8149417";var a="__parcel__error__overlay__",s=t.bundle.Module;t.bundle.Module=function(e){s.call(this,e),this.hot={data:t.bundle.hotData[e],_acceptCallbacks:[],_disposeCallbacks:[],accept:function(e){this._acceptCallbacks.push(e||function(){})},dispose:function(e){this._disposeCallbacks.push(e)}},t.bundle.hotData[e]=void 0},t.bundle.hotData={};var l,i,c,u,d=!1;function p(){return"undefined"!=typeof location&&0===location.protocol.indexOf("http")?location.hostname:"localhost"}function f(){return 1234}let m=globalThis.WebSocket;if(!m&&"function"==typeof t.bundle.root)try{m=t.bundle.root("ws")}catch{}var h=p(),g="undefined"==typeof location||"https:"!==location.protocol||["localhost","127.0.0.1","0.0.0.0"].includes(h)?"ws":"wss",y=t.bundle.parent;if(!y||!y.isParcelRequire){var v,w="undefined"==typeof browser?"undefined"==typeof chrome?null:chrome:browser,b=!1;try{(0,eval)('throw new Error("test"); //# sourceURL=test.js')}catch(e){b=e.stack.includes("test.js")}try{let{workerData:e,parentPort:o}=t.bundle.root("node:worker_threads");null!=e&&e.__parcel&&(o.on("message",async e=>{try{await _(e),o.postMessage("updated")}catch{o.postMessage("restart")}}),queueMicrotask(()=>o.postMessage("ready")))}catch{if(void 0!==m)try{v=new m(g+"://"+h+":1234/")}catch(e){e.message&&!e.message.includes("Disallowed operation called within global scope")&&console.error(e.message)}}v&&(v.onmessage=async function(e){var t=JSON.parse(e.data);await _(t)},v instanceof m&&(v.onerror=function(e){e.message&&console.error(e.message)},v.onclose=function(){console.warn("[parcel] \uD83D\uDEA8 Connection to the HMR server was lost")}))}async function _(e){if(l={},i={},u=[],c=[],d=!1,"reload"===e.type)j();else if("update"===e.type){"undefined"!=typeof document&&E();let o=e.assets,r=o.every(e=>"css"===e.type||"js"===e.type&&C(t.bundle.root,e.id,e.depsByBundle));if(r&&d&&o.some(e=>"d6ea1d42532a7575"!==e.envHash)&&"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&(r=!window.dispatchEvent(new CustomEvent("parcelhmrreload",{cancelable:!0}))),r){console.clear(),"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&window.dispatchEvent(new CustomEvent("parcelhmraccept")),await D(o),M();let e={};for(let o=0;o<u.length;o++){let r=u[o][1];e[r]||(function(e,o){e(o);var r=e.cache[o];if(r&&r.hot&&r.hot._acceptCallbacks.length){let e=[];if(r.hot._acceptCallbacks.forEach(function(r){let n=r(function(){return k(t.bundle.root,o)});Array.isArray(n)&&n.length&&e.push(...n)}),e.length){if(!e.every(function(e){return C(e[0],e[1])}))return j();M()}}}(u[o][0],r),e[r]=!0)}}else j()}if("error"===e.type){for(let t of e.diagnostics.ansi){let e=t.codeframe?t.codeframe:t.stack;console.error("\uD83D\uDEA8 [parcel]: "+t.message+"\n"+e+"\n\n"+t.hints.join("\n"))}if("undefined"!=typeof document){E();var o=function(e){var t=document.createElement("div");t.id=a;let o='<div style="background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;">';for(let t of e){let e=t.frames.length?t.frames.reduce((e,t)=>`${e}
<a href="${"wss"===g?"https":"http"}://${h}:1234/__parcel_launch_editor?file=${encodeURIComponent(t.location)}" style="text-decoration: underline; color: #888" onclick="fetch(this.href); return false">${t.location}</a>
${t.code}`,""):t.stack;o+=`
      <div>
        <div style="font-size: 18px; font-weight: bold; margin-top: 20px;">
          \u{1F6A8} ${t.message}
        </div>
        <pre>${e}</pre>
        <div>
          ${t.hints.map(e=>"<div>\uD83D\uDCA1 "+e+"</div>").join("")}
        </div>
        ${t.documentation?`<div>\u{1F4DD} <a style="color: violet" href="${t.documentation}" target="_blank">Learn more</a></div>`:""}
      </div>
    `}return t.innerHTML=o+="</div>",t}(e.diagnostics.html);document.body.appendChild(o)}}}function E(){var e=document.getElementById(a);e&&(e.remove(),console.log("[parcel] ✨ Error resolved"))}function j(){if("undefined"!=typeof location&&"reload"in location)location.reload();else if(void 0!==w&&w&&w.runtime&&w.runtime.reload)w.runtime.reload();else try{let{workerData:e,parentPort:o}=t.bundle.root("node:worker_threads");null!=e&&e.__parcel&&o.postMessage("restart")}catch(e){console.error("[parcel] ⚠️ An HMR update was not accepted. Please restart the process.")}}function k(e,t){var o,r,n,a=e.modules;if(!a)return[];var s=[];for(o in a)for(r in a[o][1])((n=a[o][1][r])===t||Array.isArray(n)&&n[n.length-1]===t)&&s.push([e,o]);return e.parent&&(s=s.concat(k(e.parent,t))),s}var x=null;async function D(e){let o;n.parcelHotUpdate=Object.create(null);try{if(!b){let t=e.map(e=>{var t;return null==(t=function(e){if("js"===e.type){if("undefined"!=typeof document){let t=document.createElement("script");return t.src=e.url+"?t="+Date.now(),"esmodule"===e.outputFormat&&(t.type="module"),new Promise((e,o)=>{var r;t.onload=()=>e(t),t.onerror=o,null==(r=document.head)||r.appendChild(t)})}else if("function"==typeof importScripts)if("esmodule"===e.outputFormat)return import(e.url+"?t="+Date.now());else return new Promise((t,o)=>{try{importScripts(e.url+"?t="+Date.now()),t()}catch(e){o(e)}})}}(e))?void 0:t.catch(e=>{if(w&&w.runtime&&3==w.runtime.getManifest().manifest_version&&"undefined"!=typeof ServiceWorkerGlobalScope&&n instanceof ServiceWorkerGlobalScope)return void w.runtime.reload();throw e})});o=await Promise.all(t)}e.forEach(function(e){!function e(o,r){var a=o.modules;if(a){if("css"===r.type)x||"undefined"==typeof document||(x=setTimeout(function(){for(var e=document.querySelectorAll('link[rel="stylesheet"]'),t=0;t<e.length;t++){var o=e[t].getAttribute("href"),r=p(),n="localhost"===r?RegExp("^(https?:\\/\\/(0.0.0.0|127.0.0.1)|localhost):1234").test(o):o.indexOf(r+":1234");/^https?:\/\//i.test(o)&&0!==o.indexOf(location.origin)&&!n||function(e){var t=e.getAttribute("href");if(t){var o=e.cloneNode();o.onload=function(){null!==e.parentNode&&e.parentNode.removeChild(e)},o.setAttribute("href",t.split("?")[0]+"?"+Date.now()),e.parentNode.insertBefore(o,e.nextSibling)}}(e[t])}x=null},50));else if("js"===r.type){let s=r.depsByBundle[o.HMR_BUNDLE_ID];if(s){if(a[r.id]){let e=a[r.id][1];for(let o in e)if(!s[o]||s[o]!==e[o]){let r=e[o];1===k(t.bundle.root,r).length&&function e(o,r){let n=o.modules;if(n)if(n[r]){let a=n[r][1],s=[];for(let e in a)1===k(t.bundle.root,a[e]).length&&s.push(a[e]);delete n[r],delete o.cache[r],s.forEach(o=>{e(t.bundle.root,o)})}else o.parent&&e(o.parent,r)}(t.bundle.root,r)}}b&&(0,eval)(r.output);let e=n.parcelHotUpdate[r.id];a[r.id]=[e,s]}o.parent&&e(o.parent,r)}}}(t.bundle.root,e)})}finally{delete n.parcelHotUpdate,o&&o.forEach(e=>{if(e){var t;null==(t=document.head)||t.removeChild(e)}})}}function C(e,o,r){if(l={},S(e,o,r))return!0;let n=k(t.bundle.root,o),a=!1;for(;n.length>0;){let e=n.shift(),o=S(e[0],e[1],null);if(o)a=!0;else if(null!==o){let o=k(t.bundle.root,e[1]);if(0===o.length){a=!1;break}n.push(...o)}}return a}function S(e,t,o){if(e.modules){if(o&&!o[e.HMR_BUNDLE_ID])return e.parent?S(e.parent,t,o):(d=!0,!0);if(l[t])return null;l[t]=!0;var r=e.cache[t];return!r||(c.push([e,t]),!!r&&!!r.hot&&!!r.hot._acceptCallbacks.length&&(u.push([e,t]),!0))}}function M(){for(let e=0;e<c.length;e++){let t=c[e][1];i[t]||(function(e,t){var o=e.cache[t];e.hotData[t]={},o&&o.hot&&(o.hot.data=e.hotData[t]),o&&o.hot&&o.hot._disposeCallbacks.length&&o.hot._disposeCallbacks.forEach(function(o){o(e.hotData[t])}),delete e.cache[t]}(c[e][0],t),i[t]=!0)}c=[]}},{}],nkpmN:[function(e,t,o,r){var n=e("./login.js"),a=e("./updateSettings.js"),s=e("./stripe.js"),l=e("./map.js");let i=document.querySelector(".form-user-data"),c=document.querySelector(".form-user-password"),u=document.getElementById("book-tour"),d=document.getElementById("map");if(d){let{startLocation:e,locations:t}=JSON.parse(d.dataset.locations);(0,l.displayMap)(e,t)}document.querySelector(".form--login")&&document.querySelector(".form--login").addEventListener("submit",e=>{e.preventDefault();let t=document.getElementById("email").value,o=document.getElementById("password").value;(0,n.login)(t,o)}),document.querySelector(".nav__el--logout")&&document.querySelector(".nav__el--logout").addEventListener("click",n.logout),i&&i.addEventListener("submit",e=>{e.preventDefault();let t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),(0,a.updateSettings)(t,"data")}),c&&c.addEventListener("submit",async e=>{e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";let t=document.getElementById("password-current").value,o=document.getElementById("password").value,r=document.getElementById("password-confirm").value;await (0,a.updateSettings)({passwordCurrent:t,password:o,passwordConfirm:r},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""}),u&&u.addEventListener("click",e=>{e.target.textContent="Processing";let{tourId:t}=e.target.dataset;(0,s.bookTour)(t)})},{"./login.js":"7yHem","./updateSettings.js":"l3cGY","./stripe.js":"10tSC","./map.js":"GDuAq"}],"7yHem":[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"login",()=>s),n.export(o,"logout",()=>l);var a=e("./alerts.js");let s=async(e,t)=>{try{let o=await axios({method:"POST",url:"/api/v1/users/login",data:{email:e,password:t}});"success"===o.data.status&&((0,a.showAlert)("success","Logged in successfully!"),console.log("hey you successed"),window.setTimeout(()=>{location.assign("/")},1500))}catch(e){(0,a.showAlert)("error",e.response.data.message),console.log(e)}},l=async()=>{try{(await axios({method:"GET",url:"/api/v1/users/logout"})).data.status="success",location.reload(!0)}catch(e){console.log(e.response),(0,a.showAlert)("error","Error logging out! Try again.")}}},{"./alerts.js":"6Mcnf","@parcel/transformer-js/src/esmodule-helpers.js":"gkKU3"}],"6Mcnf":[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"showAlert",()=>s);let a=()=>{let e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},s=(e,t)=>{a();let o=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout(a,5e3)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"gkKU3"}],gkKU3:[function(e,t,o,r){o.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},o.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.exportAll=function(e,t){return Object.keys(e).forEach(function(o){"default"===o||"__esModule"===o||Object.prototype.hasOwnProperty.call(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[o]}})}),t},o.export=function(e,t,o){Object.defineProperty(e,t,{enumerable:!0,get:o})}},{}],l3cGY:[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"updateSettings",()=>s);var a=e("./alerts.js");let s=async(e,t)=>{try{let o="password"===t?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",r=await axios({method:"PATCH",url:o,data:e});"success"===r.data.status&&(0,a.showAlert)("success",`${t.toUpperCase()} updated successfully!`)}catch(e){(0,a.showAlert)("error",e.response.data.message)}}},{"./alerts.js":"6Mcnf","@parcel/transformer-js/src/esmodule-helpers.js":"gkKU3"}],"10tSC":[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"bookTour",()=>s);let a=Stripe("pk_test_51RBxaIHJH8vBPo5TYWnLN7V5N6MHo5uImMovk6fMiVtzqUGSyVZzZTxmxSu9Jf1gZYkJsxKD2LLnaoL5CqSOTJjr00dT86MN1F"),s=async e=>{try{let t=await axios(`/api/v1/bookings/checkout-session/${e}`);await a.redirectToCheckout({sessionId:t.data.session.id})}catch(e){console.log(e),showAlert("error",e)}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"gkKU3"}],GDuAq:[function(e,t,o,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(o),n.export(o,"displayMap",()=>a);let a=(e,t)=>{let[o,r]=e.coordinates,n=L.map("map",{zoomControl:!1,scrollWheelZoom:!1}).setView([r,o],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(n);let a=L.latLngBounds();t.forEach(e=>{let[t,o]=e.coordinates,r=L.marker([o,t]).addTo(n);r.bindPopup(`<p>${e.day?`Day ${e.day}: `:""}${e.description}</p>`,{autoClose:!1}).openPopup(),a.extend(r.getLatLng())}),n.fitBounds(a,{padding:[100,100]})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"gkKU3"}]},["4AIly","nkpmN"],"nkpmN","parcelRequirec8bb",{})}),r("7Us8l")})();
//# sourceMappingURL=start.js.map
